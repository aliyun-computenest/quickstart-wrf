{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"WRF Ehpc\u8ba1\u7b97\u5de2\u5feb\u901f\u90e8\u7f72 \u514d\u8d23\u58f0\u660e\uff1a \u672c\u670d\u52a1\u7531\u7b2c\u4e09\u65b9\u63d0\u4f9b\uff0c\u6211\u4eec\u5c3d\u529b\u786e\u4fdd\u5176\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u548c\u53ef\u9760\u6027\uff0c\u4f46\u65e0\u6cd5\u4fdd\u8bc1\u5176\u5b8c\u5168\u514d\u4e8e\u6545\u969c\u3001\u4e2d\u65ad\u3001\u9519\u8bef\u6216\u653b\u51fb\u3002\u56e0\u6b64\uff0c\u672c\u516c\u53f8\u5728\u6b64\u58f0\u660e\uff1a\u5bf9\u4e8e\u672c\u670d\u52a1\u7684\u5185\u5bb9\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u53ef\u9760\u6027\u3001\u9002\u7528\u6027\u4ee5\u53ca\u53ca\u65f6\u6027\u4e0d\u4f5c\u4efb\u4f55\u9648\u8ff0\u3001\u4fdd\u8bc1\u6216\u627f\u8bfa\uff0c\u4e0d\u5bf9\u60a8\u4f7f\u7528\u672c\u670d\u52a1\u6240\u4ea7\u751f\u7684\u4efb\u4f55\u76f4\u63a5\u6216\u95f4\u63a5\u7684\u635f\u5931\u6216\u635f\u5bb3\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff1b\u5bf9\u4e8e\u60a8\u901a\u8fc7\u672c\u670d\u52a1\u8bbf\u95ee\u7684\u7b2c\u4e09\u65b9\u7f51\u7ad9\u3001\u5e94\u7528\u7a0b\u5e8f\u3001\u4ea7\u54c1\u548c\u670d\u52a1\uff0c\u4e0d\u5bf9\u5176\u5185\u5bb9\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u53ef\u9760\u6027\u3001\u9002\u7528\u6027\u4ee5\u53ca\u53ca\u65f6\u6027\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff0c\u60a8\u5e94\u81ea\u884c\u627f\u62c5\u4f7f\u7528\u540e\u679c\u4ea7\u751f\u7684\u98ce\u9669\u548c\u8d23\u4efb\uff1b\u5bf9\u4e8e\u56e0\u60a8\u4f7f\u7528\u672c\u670d\u52a1\u800c\u4ea7\u751f\u7684\u4efb\u4f55\u635f\u5931\u3001\u635f\u5bb3\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u76f4\u63a5\u635f\u5931\u3001\u95f4\u63a5\u635f\u5931\u3001\u5229\u6da6\u635f\u5931\u3001\u5546\u8a89\u635f\u5931\u3001\u6570\u636e\u635f\u5931\u6216\u5176\u4ed6\u7ecf\u6d4e\u635f\u5931\uff0c\u4e0d\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff0c\u5373\u4f7f\u672c\u516c\u53f8\u4e8b\u5148\u5df2\u88ab\u544a\u77e5\u53ef\u80fd\u5b58\u5728\u6b64\u7c7b\u635f\u5931\u6216\u635f\u5bb3\u7684\u53ef\u80fd\u6027\uff1b\u6211\u4eec\u4fdd\u7559\u4e0d\u65f6\u4fee\u6539\u672c\u58f0\u660e\u7684\u6743\u5229\uff0c\u56e0\u6b64\u8bf7\u60a8\u5728\u4f7f\u7528\u672c\u670d\u52a1\u524d\u5b9a\u671f\u68c0\u67e5\u672c\u58f0\u660e\u3002\u5982\u679c\u60a8\u5bf9\u672c\u58f0\u660e\u6216\u672c\u670d\u52a1\u5b58\u5728\u4efb\u4f55\u95ee\u9898\u6216\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\u3002 \u6982\u8ff0 WRF\uff08Weather Research and Forecasting\uff09\u91c7\u7528\u65b0\u4e00\u4ee3\u4e2d\u5c3a\u5ea6\u5929\u6c14\u9884\u62a5\u6a21\u5f0f\uff0c\u662f\u6c14\u8c61\u884c\u4e1a\u5e7f\u6cdb\u5e94\u7528\u7684\u5f00\u6e90\u6c14\u8c61\u6a21\u62df\u8f6f\u4ef6\u3002\u5b83\u4e3a\u7814\u7a76\u5927\u6c14\u8fc7\u7a0b\u63d0\u4f9b\u4e86\u5927\u91cf\u9009\u9879\uff0c\u5e76\u53ef\u4ee5\u5728\u591a\u79cd\u8ba1\u7b97\u5e73\u53f0\u8fd0\u884c\u3002 \u524d\u63d0\u6761\u4ef6 \u90e8\u7f72WRF\u793e\u533a\u7248\u670d\u52a1\u5b9e\u4f8b\uff0c\u9700\u8981\u5bf9\u90e8\u5206\u963f\u91cc\u4e91\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u548c\u521b\u5efa\u64cd\u4f5c\u3002\u56e0\u6b64\u60a8\u7684\u8d26\u53f7\u9700\u8981\u5305\u542b\u5982\u4e0b\u8d44\u6e90\u7684\u6743\u9650\u3002 \u8bf4\u660e \uff1a\u5f53\u60a8\u7684\u8d26\u53f7\u662fRAM\u8d26\u53f7\u65f6\uff0c\u624d\u9700\u8981\u6dfb\u52a0\u6b64\u6743\u9650\u3002 \u6743\u9650\u7b56\u7565\u540d\u79f0 \u5907\u6ce8 AliyunECSFullAccess \u7ba1\u7406\u4e91\u670d\u52a1\u5668\u670d\u52a1\uff08ECS\uff09\u7684\u6743\u9650 AliyunVPCFullAccess \u7ba1\u7406\u4e13\u6709\u7f51\u7edc\uff08VPC\uff09\u7684\u6743\u9650 AliyunROSFullAccess \u7ba1\u7406\u8d44\u6e90\u7f16\u6392\u670d\u52a1\uff08ROS\uff09\u7684\u6743\u9650 AliyunEHPCFullAccess \u7ba1\u7406\u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\uff08EHPC\uff09\u7684\u6743\u9650 AliyunNASFullAccess \u7ba1\u7406\u6587\u4ef6\u5b58\u50a8\uff08NAS\uff09\u7684\u6743\u9650 AliyunComputeNestUserFullAccess \u7ba1\u7406\u8ba1\u7b97\u5de2\u670d\u52a1\uff08ComputeNest\uff09\u7684\u7528\u6237\u4fa7\u6743\u9650 \u8ba1\u8d39\u8bf4\u660e WRF\u793e\u533a\u7248\u5728\u8ba1\u7b97\u5de2\u90e8\u7f72\u7684\u8d39\u7528\u4e3b\u8981\u6d89\u53ca\uff1a \u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\u96c6\u7fa4\uff08EHPC\uff09\u8d39\u7528 \u6587\u4ef6\u7cfb\u7edf\uff08NAS\uff09\u8d39\u7528 \u6d41\u91cf\u5e26\u5bbd\u8d39\u7528 \u90e8\u7f72\u67b6\u6784 \u90e8\u7f72\u7531\u4e00\u4e2aehpc\u96c6\u7fa4\u7ec4\u6210\uff0cehpc\u96c6\u7fa4\u4e2d\u5305\u62ecmanager\u8282\u70b9\u3001schedule\u8282\u70b9\u548ccompute\u8282\u70b9 \u670d\u52a1\u4f7f\u7528nas-cpfs\u6784\u5efa\u9ad8\u6027\u80fd\u5171\u4eab\u6587\u4ef6\u7cfb\u7edf \u53c2\u6570\u8bf4\u660e \u53c2\u6570\u7ec4 \u53c2\u6570\u9879 \u8bf4\u660e \u670d\u52a1\u5b9e\u4f8b \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u957f\u5ea6\u4e0d\u8d85\u8fc764\u4e2a\u5b57\u7b26\uff0c\u5fc5\u987b\u4ee5\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u53ef\u5305\u542b\u6570\u5b57\u3001\u82f1\u6587\u5b57\u6bcd\u3001\u77ed\u5212\u7ebf\uff08-\uff09\u548c\u4e0b\u5212\u7ebf\uff08_\uff09 \u5730\u57df \u670d\u52a1\u5b9e\u4f8b\u90e8\u7f72\u7684\u5730\u57df \u4ed8\u8d39\u7c7b\u578b \u8d44\u6e90\u7684\u8ba1\u8d39\u7c7b\u578b\uff1a\u6309\u91cf\u4ed8\u8d39\u548c\u5305\u5e74\u5305\u6708 EHPC\u96c6\u7fa4\u914d\u7f6e \u96c6\u7fa4\u767b\u5f55\u5bc6\u7801 \u957f\u5ea68-30\uff0c\u5fc5\u987b\u5305\u542b\u4e09\u9879\uff08\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001 ()`~!@#$%^&*-+=|{}[]:;'<>,.?/ \u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\uff09 Ehpc\u90e8\u7f72\u6a21\u5f0f Tiny\uff0cSimple\uff0cStandard \u8ba1\u7b97\u8282\u70b9\u5b9e\u4f8b\u7c7b\u578b \u53ef\u7528\u533a\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7684\u8ba1\u7b97\u8282\u70b9\u89c4\u683c \u8ba1\u7b97\u8282\u70b9\u6570\u91cf \u8ba1\u7b97\u8282\u70b9\u6570\u91cf, \u53ef\u9009\u503c: 1-99 \u767b\u5f55\u8282\u70b9\u5b9e\u4f8b\u7c7b\u578b \u53ef\u7528\u533a\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7684\u767b\u5f55\u8282\u70b9\u89c4\u683c \u7ba1\u63a7\u8282\u70b9\u6570\u91cf \u7ba1\u63a7\u8282\u70b9\u6570\u91cf, \u53ef\u9009\u503c: 1,2,4 EHPC\u96c6\u7fa4\u7528\u6237\u914d\u7f6e \u7528\u6237\u5bc6\u7801 \u957f\u5ea68-30\uff0c\u5fc5\u987b\u5305\u542b\u4e09\u9879\uff08\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001()~!@#$%^&*-_+={}[]:;'/<>,.?/\u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\uff09 \u7528\u6237\u540d\u79f0 \u767b\u5f55\u96c6\u7fa4\u6240\u7528\u7684\u7528\u6237\u540d\uff0c\u9ed8\u8ba4\u4e3alammps \u7f51\u7edc\u914d\u7f6e \u53ef\u7528\u533a ECS\u5b9e\u4f8b\u6240\u5728\u53ef\u7528\u533a VPC ID \u8d44\u6e90\u6240\u5728VPC \u4ea4\u6362\u673aID \u8d44\u6e90\u6240\u5728\u4ea4\u6362\u673a \u90e8\u7f72\u6d41\u7a0b \u8bbf\u95ee\u8ba1\u7b97\u5de2WRF\u793e\u533a\u7248 \u90e8\u7f72\u94fe\u63a5 \u53c2\u6570\u586b\u5199\u5b8c\u6210\u540e\u53ef\u4ee5\u770b\u5230\u5bf9\u5e94\u8be2\u4ef7\u660e\u7ec6\uff0c\u786e\u8ba4\u53c2\u6570\u540e\u70b9\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u786e\u8ba4\u8ba2\u5355\u5b8c\u6210\u540e\u540c\u610f\u670d\u52a1\u534f\u8bae\u5e76\u70b9\u51fb \u7acb\u5373\u521b\u5efa \u8fdb\u5165\u90e8\u7f72\u9636\u6bb5\u3002 \u4f7f\u7528\u6d41\u7a0b \u6b65\u9aa4\u4e00\uff1a\u901a\u8fc7\u63a7\u5236\u53f0\u8fde\u63a5\u96c6\u7fa4 \u767b\u5f55 \u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\u63a7\u5236\u53f0 \u3002 \u5728\u9876\u90e8\u83dc\u5355\u680f\u5de6\u4e0a\u89d2\u5904\uff0c\u9009\u62e9\u5730\u57df\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u5355\u51fb \u96c6\u7fa4 \u3002 \u5728 \u96c6\u7fa4 \u9875\u9762\uff0c\u627e\u5230\u5728\u8ba1\u7b97\u5de2\u90e8\u7f72\u597d\u7684\u76ee\u6807\u96c6\u7fa4\uff0c\u5355\u51fb \u8fdc\u7a0b\u8fde\u63a5 \u3002 \u5728 \u8fdc\u7a0b\u8fde\u63a5 \u9875\u9762\uff0c\u8f93\u5165\u96c6\u7fa4\u7528\u6237\u540d\u3001\u767b\u5f55\u5bc6\u7801\u548c\u7aef\u53e3\uff0c\u5355\u51fb ssh\u8fde\u63a5 \u3002 \u6b65\u9aa4\u4e8c\uff1a\u63d0\u4ea4\u4f5c\u4e1a \u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528E-HPC\u96c6\u7fa4\u8fd0\u884cWRF\u8f6f\u4ef6\u8fdb\u884c\u6c14\u8c61\u6a21\u62df\u8ba1\u7b97\u3002 1.\u67e5\u770b\u96c6\u7fa4\u662f\u5426\u5df2\u5b89\u88c5WRF\u76f8\u5173\u8f6f\u4ef6\u3002 export MODULEPATH=/opt/ehpcmodulefiles/ module avail \u9884\u671f\u8fd4\u56de\u5982\u4e0b\uff1a ----------------------------- /opt/ehpcmodulefiles/ ------------------------ mpich/3.2 vnc wrf-mpich/3.8.1 2.\u52a0\u8f7dWRF\u8f6f\u4ef6\u73af\u5883\u3002 module load wrf-mpich/3.8.1 mpich/3.2 echo $WPSHOME $WRFHOME 3.\u5c06\u5b89\u88c5\u7684WPS\u548cWRF\u8f6f\u4ef6\u62f7\u8d1d\u5230\u5de5\u4f5c\u76ee\u5f55\u3002 \u8bf4\u660e:\u8bf7\u5c06\u547d\u4ee4\u4e2d\u7684$WPSCOPYHOME\u548c$WRFCOPYHOME\u66ff\u6362\u4e3a\u5b9e\u9645\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u672c\u6587\u4f7f\u7528/home/wrftest\u4f5c\u4e3a\u793a\u4f8b\u3002\u64cd\u4f5c\u540e\uff0c\u8be5\u76ee\u5f55\u4e0b\u5c06\u751f\u6210WPS\u548cWRFV3\u4e24\u4e2a\u76ee\u5f55\u3002\u3002 cp -r $WPSHOME /home/wrftest cp -r $WRFHOME /home/wrftest 4.\u8fdb\u5165WPS\u76ee\u5f55\uff0c\u7136\u540e\u4e0b\u8f7d\u5e76\u89e3\u538b\u5730\u8868\u6570\u636e\u3002 \u8bf4\u660e:\u672c\u793a\u4f8b\u4e2d\u5730\u8868\u6570\u636e\u4f7f\u7528geog_complete.tar.gz\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e0b\u8f7d\u5176\u4ed6\u5730\u8868\u6570\u636e\u3002 cd /home/wrftest/WPS wget https://www2.mmm.ucar.edu/wrf/src/wps_files/geog_complete.tar.gz tar -zxvf geog_complete.tar.gz 5.\u94fe\u63a5\u5230GEOGRID.TBL\u6587\u4ef6\u3002 \u8bf4\u660e:GEOGRID.TBL\u6587\u4ef6\u5b9a\u4e49\u4e86geogrid.exe\u9700\u8981\u63d2\u503c\u5230\u7f51\u683c\u70b9\u4e0a\u7684\u5404\u9759\u6001\u5730\u7406\u6570\u636e\u96c6\u53c2\u6570\u3002 ln -s geogrid/GEOGRID.TBL GEOGRID.TBL 6.\u4fee\u6539namelist.wps\u6587\u4ef6\u3002 namelist\u662fWPS\uff08WRF Preprocessing System\uff0cWRF\u9884\u5904\u7406\u7cfb\u7edf\uff09\u4e2d\u7684\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u6309\u7167\u5404\u4e2a\u7a0b\u5e8f\uff08geogrid.exe\u3001ungrib.exe\u3001metgrid.exe\uff09\u6240\u9700\u8981\u53c2\u6570\u7684\u4e0d\u540c\u5206\u6210\u4e09\u4e2a\u90e8\u5206\uff08&geogrid\u3001&ungrib\u3001&metgrid\uff09\u53ca\u4e00\u4e2a\u5171\u4eab\u90e8\u5206\uff08&share\uff09\uff0c\u5206\u522b\u5b9a\u4e49\u4e86WPS\u6a21\u5757\u6240\u9700\u8981\u7684\u5404\u79cd\u53c2\u6570\u3002\u5982\u4e0b\u793a\u4f8b\u4e3a\u63a8\u8350\u914d\u7f6e\uff0c\u672a\u63d0\u53ca\u7684\u53c2\u6570\u4fdd\u6301\u9ed8\u8ba4\u5373\u53ef\u3002 1.\u672c\u793a\u4f8b\u4e2d\uff0cnamelist.wps\u6587\u4ef6\u5b58\u653e\u5728/home/wrftest/WPS\u76ee\u5f55\u4e0b\u3002 2.\u5728namelist.wps\u6587\u4ef6\u4e2d\uff0c\u8bf7\u4f7f\u7528!\u4f5c\u4e3a\u6ce8\u91ca\u6807\u8bc6\u3002 !\u5171\u4eab\u90e8\u5206 &share !wrf_core\uff1a\u9009\u62e9WRF dynamical core\uff0c\u6709'ARW'\u548c'NMM'\u4e24\u4e2a\u9009\u9879\uff0c\u9ed8\u8ba4\u503c\u4e3a'ARW'\u3002 wrf_core = 'ARW', !start_date\uff1a\u6a21\u62df\u5f00\u59cb\u65f6\u95f4 start_date = '2005-08-28_00:00:00', !end_date\uff1a\u6a21\u62df\u7ed3\u675f\u65f6\u95f4 end_date = '2005-08-29_00:00:00', interval_seconds = 21600, !max_dom\uff1a\u6a21\u62df\u7f51\u683c\u6570\uff08\u7c97\u7f51\u683c+\u5d4c\u5957\u7f51\u683c\uff09\uff0c\u672c\u793a\u4f8b\u4e2d\u5305\u542b\u4e00\u4e2a\u7c97\u7f51\u683c max_dom = 1, !#io_form_geogrid: geogrid\u7a0b\u5e8f\u8f93\u51fa\u683c\u5f0f io_form_geogrid = 2, / !geogrid\u90e8\u5206 !#\u786e\u5b9a\u533a\u57df\u8303\u56f4\u3001\u5d4c\u5957\u5173\u7cfb\u3001\u6a21\u578b\u6295\u5f71 &geogrid parent_id = 1, parent_grid_ratio = 1, i_parent_start = 1, j_parent_start = 1, !\u786e\u5b9a\u7f51\u683c\u5728\u4e1c\u897f\u65b9\u5411\u3001\u5357\u5317\u65b9\u5411\u7684\u5c3a\u5ea6\uff08\u533a\u57df\u7684\u77e2\u91cf\u573a\u7684\u6805\u683c\u6570\uff09\uff0c\u672c\u793a\u4f8b\u4e2d\u4e3a98*70\u4e2a\u7f51\u683c\u70b9 e_we = 98, e_sn = 70, geog_data_res = 'default', !\u5b9a\u4e49\u533a\u57df\u7684\u6805\u683c\u5c3a\u5bf8\uff0c\u672c\u793a\u4f8b\u4e2d\u7f51\u683c\u5206\u8fa8\u7387\u4e3a30km dx = 30000, dy = 30000, !\u5b9a\u4e49\u6295\u5f71\u65b9\u5f0f\uff0c\u5173\u4e8e\u6295\u5f71\u65b9\u5f0f\u8bf4\u660e\u53ef\u4ee5\u53c2\u8003WRF\u5b98\u7f51 map_proj = 'mercator' !\u5b9a\u4e49\u533a\u57df\u7684\u4e2d\u5fc3\u7ecf\u7eac\u5ea6\u5750\u6807 ref_lat = 25.00, ref_lon = -89.00, !\u6295\u5f71\u7684\u4e09\u4e2a\u53c2\u6570\u503c\uff0c\u968f\u6295\u5f71\u65b9\u5f0f\u4e0d\u540c\u8bbe\u5b9a\u4e0d\u540c truelat1 = 0.0, truelat2 = 0.0, stand_lon = -89.0, !geog_data_path = '\u5730\u8868\u6570\u636e\u5b58\u50a8\u8def\u5f84' geog_data_path = '/home/wrftest/WPS/geog' / !ungrib\u90e8\u5206 &ungrib !out_format\uff1aungrib\u751f\u6210\u7684\u53ef\u4f9bmetgrid\u8bfb\u53d6\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u6709'WPS'\u3001'SI'\u3001'MM5'\u4e09\u79cd\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a'WPS' out_format = 'WPS', !prefix\uff1aungrib\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u524d\u7f00\u540d prefix = 'FILE' / !metgrid\u90e8\u5206 &metgrid !fg_name\uff1aungrib\u7a0b\u5e8f\u751f\u6210\u7684\u6587\u4ef6 fg_name = 'FILE', !io_form_metgrid\uff1ametgrid\u751f\u6210\u7684\u6587\u4ef6\u683c\u5f0f !\u652f\u6301\u4e09\u79cd\u683c\u5f0f1\uff08binary\uff0c\u540e\u7f00\u540d.int\uff09\u30012\uff08net CDF\uff0c\u540e\u7f00\u540d.nc\uff09\u30013\uff08Grib1\uff0c\u540e\u7f00\u540d.gr1\uff09 !\u9ed8\u8ba4\u503c\uff1a2 io_form_metgrid = 2 / 7.\u5c06\u9759\u6001\u5730\u5f62\u6570\u636e\u63d2\u503c\u5230\u7f51\u683c\u70b9\u3002 ./geogrid.exe \u8fd0\u884cgeogrid.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210geo_em.d0N.nc\u5730\u5f62\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a \u6b65\u9aa4\u4e09\uff1a\u8fd0\u884cungrib.exe ungrib.exe\u7528\u4e8e\u4eceGRIB\u683c\u5f0f\u7684\u6c14\u8c61\u6570\u636e\u4e2d\u63d0\u53d6\u6240\u9700\u8981\u7684\u6c14\u8c61\u8981\u7d20\u573a\u3002 1.\u4e0b\u8f7d\u5e76\u89e3\u538bKatrina\u6c14\u8c61\u6570\u636e\u3002 \u8bf4\u660e: \u672c\u793a\u4f8b\u4e2d\u6c14\u8c61\u6570\u636e\u4e3aKatrina.tar.gz\uff0c\u8bf7\u4e0b\u8f7dKatrina.tar.gz\u3002\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e0b\u8f7d\u5176\u4ed6\u6c14\u8c61\u6570\u636e\u3002 cd /home/wrftest/WPS wget http://www2.mmm.ucar.edu/wrf/TUTORIAL_DATA/Katrina.tar.gz tar -zxvf Katrina.tar.gz 2.\u901a\u8fc7link_grib.csh\u811a\u672c\u94fe\u63a5\u6c14\u8c61\u6570\u636e\u3002 ./link_grib.csh /home/wrftest/WPS/Katrina/avn* 3.\u9009\u62e9\u6c14\u8c61\u6570\u636e\u76f8\u5e94\u7684Vtable\u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684Vtable\u4e3aVtable.GFS\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u7684Vtable\u3002 ln -sf ungrib/Variable_Tables/Vtable.GFS Vtable 4.\u63d0\u53d6\u6240\u9700\u8981\u7684\u6c14\u8c61\u8981\u7d20\u573a\u3002 ./ungrib.exe \u8fd0\u884cungrib.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210FILE:YYYY-MM-DD_hh*\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a \u6b65\u9aa4\u56db\uff1a\u8fd0\u884cmetgrid.exe metgrid.exe\u7528\u4e8e\u5c06ungrib.exe\u63d0\u53d6\u51fa\u7684\u6c14\u8c61\u573a\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7531geogrid.exe\u786e\u5b9a\u7684\u7f51\u683c\u70b9\u4e0a\u3002 1.\u94fe\u63a5\u5230GEOGRID.TBL\u6587\u4ef6\u3002 GEOGRID.TBL\u6587\u4ef6\u5b9a\u4e49\u4e86metgrid.exe\u5982\u4f55\u5c06\u6c14\u8c61\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7f51\u683c\u70b9\u4e0a\u3002 cd /home/wrftest/WPS ln -s metgrid/METGRID.TBL.ARW METGRID.TBL 2.\u5c06\u6c14\u8c61\u573a\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7531geogrid\u786e\u5b9a\u7684\u7f51\u683c\u70b9\u4e0a\u3002 ./metgrid.exe \u8fd0\u884cmetgrid.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210met_em.d0N.yyyy-mm-dd_hh:mm:ss.nc\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a \u6b65\u9aa4\u4e94\uff1a\u8fd0\u884cwrf.exe wrf.exe\u7528\u4e8e\u8f93\u51fa\u5929\u6c14\u9884\u6d4b\u6570\u636e\u3002 1.\u8fde\u63a5WPS\u7684\u5904\u7406\u7ed3\u679c\u3002 cd /home/wrftest/WRFV3 ln -s /home/wrftest/WPS/met_em.d01.2005-08-2*. \u6ce8\u610f: \u6b64\u5904\u8981\u662f\u8fde\u63a5\u4e0d\u6210\u529f\uff0c\u4f1a\u5bfc\u81f4\u540e\u9762\u7684wrfinput_d01\u3001wrfbdy_d01\u6587\u4ef6\u521b\u5efa\u4e0d\u51fa\u6765\uff0c\u60a8\u53ef\u4ee5\u5c06/home/wrftest/WPS\u6587\u4ef6\u5939\u4e0bmet_em.d01.2005-08-2\u5f00\u5934\u7684\u6587\u4ef6\u62f7\u8d1d\u5230/home/wrftest/WRFV3\u6587\u4ef6\u5939\u4e0b\u3002 2.\u4fee\u6539namelist.input\u6587\u4ef6\u3002 cd /home/wrftest/WRFV3/run vim namelist.input namelist.input\u6587\u4ef6\u4e2d&time_control\u3001&domains\u90e8\u5206\u7684\u76f8\u5173\u53c2\u6570\u9700\u8981\u4e0enamelist.wps\u6587\u4ef6\u4e2d\u7684\u53c2\u6570\u4fdd\u6301\u4e00\u81f4\u3002\u672c\u6587\u4f7f\u7528\u7684\u914d\u7f6e\u793a\u4f8b\u5982\u4e0b: &time_control run_days = 0, run_hours = 12, run_minutes = 0, run_seconds = 0, start_year = 2005, 2005, 2005, start_month = 08, 08, 08, start_day = 28, 28, 28, start_hour = 00, 00, 00, start_minute = 00, 00, 00, start_second = 00, 00, 00, end_year = 2005, 2005, 2005, end_month = 08, 08, 08, end_day = 29, 29, 29, end_hour = 00, 00, 00, end_minute = 00, 00, 00, end_second = 00, 00, 00, interval_seconds = 21600 input_from_file = .true.,.true.,.true., history_interval = 180, 60, 60, frames_per_outfile = 1000, 1000, 1000, restart = .false., restart_interval = 5000, io_form_history = 2 io_form_restart = 2 io_form_input = 2 io_form_boundary = 2 debug_level = 0 iofields_filename = \"extraoutput_d01.txt\" / &domains time_step = 180, time_step_fract_num = 0, time_step_fract_den = 1, max_dom = 1, e_we = 98, 112, 94, e_sn = 70, 97, 91, e_vert = 30, 30, 30, p_top_requested = 5000, num_metgrid_levels = 27, num_metgrid_soil_levels = 4, dx = 30000, 10000, 3333.33, dy = 30000, 10000, 3333.33, grid_id = 1, 2, 3, parent_id = 0, 1, 2, i_parent_start = 1, 31, 30, j_parent_start = 1, 17, 30, parent_grid_ratio = 1, 3, 3, parent_time_step_ratio = 1, 3, 3, feedback = 1, smooth_option = 0, / &physics mp_physics = 6, 6, 6, ra_lw_physics = 4, 4, 4, ra_sw_physics = 4, 4, 4, radt = 10, 10, 10, sf_sfclay_physics = 1, 1, 1, sf_surface_physics = 2, 2, 2, bl_pbl_physics = 1, 1, 1, bldt = 0, 0, 0, cu_physics = 0, 0, 0, cudt = 0, 0, 0, isfflx = 1, ifsnow = 0, icloud = 1, surface_input_source = 1, num_soil_layers = 4, sf_urban_physics = 0, 0, 0, / &fdda / &dynamics w_damping = 0, diff_opt = 1, 1, 1, km_opt = 4, 4, 4, diff_6th_opt = 0, 0, 0, diff_6th_factor = 0.12, 0.12, 0.12, base_temp = 290. damp_opt = 0, zdamp = 5000., 5000., 5000., dampcoef = 0.2, 0.2, 0.2 khdif = 0, 0, 0, kvdif = 0, 0, 0, non_hydrostatic = .true., .true., .true., moist_adv_opt = 1, 1, 1, scalar_adv_opt = 1, 1, 1, / &bdy_control spec_bdy_width = 5, spec_zone = 1, relax_zone = 4, specified = .true., .false.,.false., nested = .false., .true., .true., / &grib2 / &namelist_quilt nio_tasks_per_group = 0, nio_groups = 1, / 3.\u521d\u59cb\u5316\u6a21\u62df\u6570\u636e\u3002 ./real.exe \u8fd0\u884creal.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftest/WRFV3/run\u76ee\u5f55\u4e0b\u751f\u6210wrfinput_d01\u3001wrfbdy_d01\u6587\u4ef6\u3002 4.\u8f93\u51fa\u5929\u6c14\u9884\u6d4b\u6570\u636e\u3002 \u7f16\u5199\u4f5c\u4e1a\u811a\u672c vim wrf.slurm wrf.slurm\u7684\u5185\u5bb9\u793a\u4f8b\u5982\u4e0b\uff1a #!/bin/bash #SBATCH -N 1 #SBATCH -n 2 #SBATCH --cpus-per-task=1 #SBATCH -J wrf-test #SBATCH -o wrf_test.log module load wrf-mpich/3.8.1 mpich/3.2 mpirun -np 2 -ppn 1 -bind-to core:1 /home/wrftest/WRFV3/run/wrf.exe \u63d0\u4ea4\u4f5c\u4e1a batch < wrf.slurm \u6ce8\u610f\uff1a\u8981\u662f\u6267\u884c\u4e0d\u6210\u529f\u8bf7\u67e5\u770bwrf_test.log\u6587\u4ef6\uff0c\u5982\u53d1\u751f\u4ee5\u4e0b\u9519\u8bef\uff0c\u8bf7\u6267\u884c\uff1a export LD_LIBRARY_PATH=/opt/WRF_WPS-mpich-3.8.1/util/lib:$LD_LIBRARY_PATH \u4f5c\u4e1a\u8fd0\u884c\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftest/WRFV3/run\u76ee\u5f55\u4e0b\u751f\u6210wrfout_d01_[date]\u6587\u4ef6\uff0c\u4f8b\u5982\uff1awrfout_d01_2005-08-28_00:00:00\u3002 \u6b65\u9aa4\u516d\uff1a\u5b89\u88c5NCL \u4ee5\u4e0b\u662f\u5728 CentOS 7.6 \u4e0a\u5b89\u88c5 Miniconda \u548c NCL \u7684\u6b65\u9aa4\uff1a 1.\u521b\u5efancl\u6587\u4ef6\u5939 cd /home/wrftest/WRFV3/run mkdir ncl 2.\u4e0b\u8f7d Miniconda \u5b89\u88c5\u811a\u672c\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4ece Miniconda \u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\uff1a wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh 3.\u8fd0\u884c\u5b89\u88c5\u811a\u672c\u4ee5\u5b89\u88c5 Miniconda\u3002\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u811a\u672c\uff1a bash Miniconda3-latest-Linux-x86_64.sh 4.\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u6b64\u65f6\u524d\u9762\u4f1a\u51fa\u73b0\uff08base\uff09\u3002 source ~/.bashrc 5.\u67e5\u770b\u5b89\u88c5conda\u7684\u7248\u672c\u3002 conda -V 6.\u66f4\u65b0conda\u3002\u9047\u5230yes/no\u7684\u65f6\u5019\u90fd\u662fyes\u3002 conda update -n root --all 7.\u5b89\u88c5ncl\u3002 conda create -n ncl_stable -c conda-forge ncl 8.\u8fdb\u5165ncl\u4ea4\u4e92\u6a21\u5f0f conda activate ncl_stable ncl \u8bf4\u660e\uff1a\u5f53\u8f93\u5165\u5b8cncl\u547d\u4ee4\uff0c\u5c4f\u5e55\u51fa\u73b0: ncl 0> ,\u5c31\u7b97\u662f\u5b89\u88c5\u6210\u529f\u3002 9.\u9000\u51fa\u4ea4\u4e92\u6a21\u5f0f exit \u6b65\u9aa4\u4e03\uff1aWRF\u7ed3\u679c\u56fe\u50cf\u5316 1.\u521b\u5efancl\u6587\u4ef6 \u5c06\u6b65\u9aa4\u4e94\u7684\u8fd0\u884c\u7ed3\u679c\u8f6c\u5316\u4e3a.ncl\u6587\u4ef6 cd /home/wrftest/WRFV3/run vim wrf_test.ncl \u5c06\u4e0b\u9762\u5185\u5bb9\u5199\u5165wrf_test.ncl\u6587\u4ef6\u4e2d load \"$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl\" load \"$NCARG_ROOT/lib/ncarg/nclscripts/wrf/WRFUserARW.ncl\" begin a = addfile(\"/home/wrftest/WRFV3/run/wrfout_d01_2005-08-28_00:00:00\",\"r\") ter = wrf_user_getvar(a,\"HGT\",0) ; Get terrain height for time 0 wks = gsn_open_wks(\"png\",\"test\") ; Create a plot workstation opts = True ; Set some Basic Plot options opts@MainTitle = \"GEOGRID FIELDS\" res = opts ; Use basic options for this field res@cnFillOn = True ; Create a color fill plot contour = wrf_contour(a,wks,ter,res) ; \u5355\u72eccontour\u6ca1\u6709\u753b\u9762 pltres = True ; Set plot options mpres = True ; Set map options mpres@mpGeophysicalLineColor = \"Black\" ; Overwrite basic map settings mpres@mpGridLineColor = \"Black\" mpres@mpLimbLineColor = \"Black\" mpres@mpNationalLineColor = \"Black\" mpres@mpPerimLineColor = \"Black\" mpres@mpUSStateLineColor = \"Black\" plot = wrf_map_overlays(a,wks,(/contour/),pltres,mpres) ; Plot the data over a map background end 2.\u4f7f\u7528ncl\u8fd0\u884cwrf_test.ncl\u6587\u4ef6\u3002 conda activate ncl_stable ncl wrf_test.ncl \u8bf4\u660e\uff1a\u6267\u884c\u6210\u529f\u540e\u4f1a\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u751f\u6210test.png\u6587\u4ef6 \u6b65\u9aa4\u516b\uff1a\u67e5\u770b\u56fe\u50cf\u5316\u7ed3\u679c \u672c\u6587\u4f7f\u7528\u7ed9\u8ba1\u7b97\u8282\u70b9\u6302\u8f7dEIP\u7684\u65b9\u5f0f\uff0c\u5c06png\u56fe\u7247\u6587\u4ef6\u4e0b\u8f7d\u5230\u672c\u5730\u67e5\u770b 1.\u5728EHPC\u63a7\u5236\u53f0\u627e\u5230\u8ba1\u7b97\u8282\u70b9\u5b9e\u4f8b 2.\u521b\u5efa\u5f39\u6027\u516c\u7f51IP\u5e76\u4e0e\u8ba1\u7b97\u5b9e\u4f8b\u7ed1\u5b9a 3.\u5c06\u56fe\u7247\u4f20\u8f93\u5230\u672c\u5730\u5e76\u67e5\u770b scp root@\u516c\u7f51IP:/home/wrftest/WRFV3/run/test.png ./","title":"WRF Ehpc\u8ba1\u7b97\u5de2\u5feb\u901f\u90e8\u7f72"},{"location":"#wrf-ehpc","text":"\u514d\u8d23\u58f0\u660e\uff1a \u672c\u670d\u52a1\u7531\u7b2c\u4e09\u65b9\u63d0\u4f9b\uff0c\u6211\u4eec\u5c3d\u529b\u786e\u4fdd\u5176\u5b89\u5168\u6027\u3001\u51c6\u786e\u6027\u548c\u53ef\u9760\u6027\uff0c\u4f46\u65e0\u6cd5\u4fdd\u8bc1\u5176\u5b8c\u5168\u514d\u4e8e\u6545\u969c\u3001\u4e2d\u65ad\u3001\u9519\u8bef\u6216\u653b\u51fb\u3002\u56e0\u6b64\uff0c\u672c\u516c\u53f8\u5728\u6b64\u58f0\u660e\uff1a\u5bf9\u4e8e\u672c\u670d\u52a1\u7684\u5185\u5bb9\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u53ef\u9760\u6027\u3001\u9002\u7528\u6027\u4ee5\u53ca\u53ca\u65f6\u6027\u4e0d\u4f5c\u4efb\u4f55\u9648\u8ff0\u3001\u4fdd\u8bc1\u6216\u627f\u8bfa\uff0c\u4e0d\u5bf9\u60a8\u4f7f\u7528\u672c\u670d\u52a1\u6240\u4ea7\u751f\u7684\u4efb\u4f55\u76f4\u63a5\u6216\u95f4\u63a5\u7684\u635f\u5931\u6216\u635f\u5bb3\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff1b\u5bf9\u4e8e\u60a8\u901a\u8fc7\u672c\u670d\u52a1\u8bbf\u95ee\u7684\u7b2c\u4e09\u65b9\u7f51\u7ad9\u3001\u5e94\u7528\u7a0b\u5e8f\u3001\u4ea7\u54c1\u548c\u670d\u52a1\uff0c\u4e0d\u5bf9\u5176\u5185\u5bb9\u3001\u51c6\u786e\u6027\u3001\u5b8c\u6574\u6027\u3001\u53ef\u9760\u6027\u3001\u9002\u7528\u6027\u4ee5\u53ca\u53ca\u65f6\u6027\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff0c\u60a8\u5e94\u81ea\u884c\u627f\u62c5\u4f7f\u7528\u540e\u679c\u4ea7\u751f\u7684\u98ce\u9669\u548c\u8d23\u4efb\uff1b\u5bf9\u4e8e\u56e0\u60a8\u4f7f\u7528\u672c\u670d\u52a1\u800c\u4ea7\u751f\u7684\u4efb\u4f55\u635f\u5931\u3001\u635f\u5bb3\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u76f4\u63a5\u635f\u5931\u3001\u95f4\u63a5\u635f\u5931\u3001\u5229\u6da6\u635f\u5931\u3001\u5546\u8a89\u635f\u5931\u3001\u6570\u636e\u635f\u5931\u6216\u5176\u4ed6\u7ecf\u6d4e\u635f\u5931\uff0c\u4e0d\u627f\u62c5\u4efb\u4f55\u8d23\u4efb\uff0c\u5373\u4f7f\u672c\u516c\u53f8\u4e8b\u5148\u5df2\u88ab\u544a\u77e5\u53ef\u80fd\u5b58\u5728\u6b64\u7c7b\u635f\u5931\u6216\u635f\u5bb3\u7684\u53ef\u80fd\u6027\uff1b\u6211\u4eec\u4fdd\u7559\u4e0d\u65f6\u4fee\u6539\u672c\u58f0\u660e\u7684\u6743\u5229\uff0c\u56e0\u6b64\u8bf7\u60a8\u5728\u4f7f\u7528\u672c\u670d\u52a1\u524d\u5b9a\u671f\u68c0\u67e5\u672c\u58f0\u660e\u3002\u5982\u679c\u60a8\u5bf9\u672c\u58f0\u660e\u6216\u672c\u670d\u52a1\u5b58\u5728\u4efb\u4f55\u95ee\u9898\u6216\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\u3002","title":"WRF Ehpc\u8ba1\u7b97\u5de2\u5feb\u901f\u90e8\u7f72"},{"location":"#_1","text":"WRF\uff08Weather Research and Forecasting\uff09\u91c7\u7528\u65b0\u4e00\u4ee3\u4e2d\u5c3a\u5ea6\u5929\u6c14\u9884\u62a5\u6a21\u5f0f\uff0c\u662f\u6c14\u8c61\u884c\u4e1a\u5e7f\u6cdb\u5e94\u7528\u7684\u5f00\u6e90\u6c14\u8c61\u6a21\u62df\u8f6f\u4ef6\u3002\u5b83\u4e3a\u7814\u7a76\u5927\u6c14\u8fc7\u7a0b\u63d0\u4f9b\u4e86\u5927\u91cf\u9009\u9879\uff0c\u5e76\u53ef\u4ee5\u5728\u591a\u79cd\u8ba1\u7b97\u5e73\u53f0\u8fd0\u884c\u3002","title":"\u6982\u8ff0"},{"location":"#_2","text":"\u90e8\u7f72WRF\u793e\u533a\u7248\u670d\u52a1\u5b9e\u4f8b\uff0c\u9700\u8981\u5bf9\u90e8\u5206\u963f\u91cc\u4e91\u8d44\u6e90\u8fdb\u884c\u8bbf\u95ee\u548c\u521b\u5efa\u64cd\u4f5c\u3002\u56e0\u6b64\u60a8\u7684\u8d26\u53f7\u9700\u8981\u5305\u542b\u5982\u4e0b\u8d44\u6e90\u7684\u6743\u9650\u3002 \u8bf4\u660e \uff1a\u5f53\u60a8\u7684\u8d26\u53f7\u662fRAM\u8d26\u53f7\u65f6\uff0c\u624d\u9700\u8981\u6dfb\u52a0\u6b64\u6743\u9650\u3002 \u6743\u9650\u7b56\u7565\u540d\u79f0 \u5907\u6ce8 AliyunECSFullAccess \u7ba1\u7406\u4e91\u670d\u52a1\u5668\u670d\u52a1\uff08ECS\uff09\u7684\u6743\u9650 AliyunVPCFullAccess \u7ba1\u7406\u4e13\u6709\u7f51\u7edc\uff08VPC\uff09\u7684\u6743\u9650 AliyunROSFullAccess \u7ba1\u7406\u8d44\u6e90\u7f16\u6392\u670d\u52a1\uff08ROS\uff09\u7684\u6743\u9650 AliyunEHPCFullAccess \u7ba1\u7406\u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\uff08EHPC\uff09\u7684\u6743\u9650 AliyunNASFullAccess \u7ba1\u7406\u6587\u4ef6\u5b58\u50a8\uff08NAS\uff09\u7684\u6743\u9650 AliyunComputeNestUserFullAccess \u7ba1\u7406\u8ba1\u7b97\u5de2\u670d\u52a1\uff08ComputeNest\uff09\u7684\u7528\u6237\u4fa7\u6743\u9650","title":"\u524d\u63d0\u6761\u4ef6"},{"location":"#_3","text":"WRF\u793e\u533a\u7248\u5728\u8ba1\u7b97\u5de2\u90e8\u7f72\u7684\u8d39\u7528\u4e3b\u8981\u6d89\u53ca\uff1a \u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\u96c6\u7fa4\uff08EHPC\uff09\u8d39\u7528 \u6587\u4ef6\u7cfb\u7edf\uff08NAS\uff09\u8d39\u7528 \u6d41\u91cf\u5e26\u5bbd\u8d39\u7528","title":"\u8ba1\u8d39\u8bf4\u660e"},{"location":"#_4","text":"\u90e8\u7f72\u7531\u4e00\u4e2aehpc\u96c6\u7fa4\u7ec4\u6210\uff0cehpc\u96c6\u7fa4\u4e2d\u5305\u62ecmanager\u8282\u70b9\u3001schedule\u8282\u70b9\u548ccompute\u8282\u70b9 \u670d\u52a1\u4f7f\u7528nas-cpfs\u6784\u5efa\u9ad8\u6027\u80fd\u5171\u4eab\u6587\u4ef6\u7cfb\u7edf","title":"\u90e8\u7f72\u67b6\u6784"},{"location":"#_5","text":"\u53c2\u6570\u7ec4 \u53c2\u6570\u9879 \u8bf4\u660e \u670d\u52a1\u5b9e\u4f8b \u670d\u52a1\u5b9e\u4f8b\u540d\u79f0 \u957f\u5ea6\u4e0d\u8d85\u8fc764\u4e2a\u5b57\u7b26\uff0c\u5fc5\u987b\u4ee5\u82f1\u6587\u5b57\u6bcd\u5f00\u5934\uff0c\u53ef\u5305\u542b\u6570\u5b57\u3001\u82f1\u6587\u5b57\u6bcd\u3001\u77ed\u5212\u7ebf\uff08-\uff09\u548c\u4e0b\u5212\u7ebf\uff08_\uff09 \u5730\u57df \u670d\u52a1\u5b9e\u4f8b\u90e8\u7f72\u7684\u5730\u57df \u4ed8\u8d39\u7c7b\u578b \u8d44\u6e90\u7684\u8ba1\u8d39\u7c7b\u578b\uff1a\u6309\u91cf\u4ed8\u8d39\u548c\u5305\u5e74\u5305\u6708 EHPC\u96c6\u7fa4\u914d\u7f6e \u96c6\u7fa4\u767b\u5f55\u5bc6\u7801 \u957f\u5ea68-30\uff0c\u5fc5\u987b\u5305\u542b\u4e09\u9879\uff08\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001 ()`~!@#$%^&*-+=|{}[]:;'<>,.?/ \u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\uff09 Ehpc\u90e8\u7f72\u6a21\u5f0f Tiny\uff0cSimple\uff0cStandard \u8ba1\u7b97\u8282\u70b9\u5b9e\u4f8b\u7c7b\u578b \u53ef\u7528\u533a\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7684\u8ba1\u7b97\u8282\u70b9\u89c4\u683c \u8ba1\u7b97\u8282\u70b9\u6570\u91cf \u8ba1\u7b97\u8282\u70b9\u6570\u91cf, \u53ef\u9009\u503c: 1-99 \u767b\u5f55\u8282\u70b9\u5b9e\u4f8b\u7c7b\u578b \u53ef\u7528\u533a\u4e0b\u53ef\u4ee5\u4f7f\u7528\u7684\u767b\u5f55\u8282\u70b9\u89c4\u683c \u7ba1\u63a7\u8282\u70b9\u6570\u91cf \u7ba1\u63a7\u8282\u70b9\u6570\u91cf, \u53ef\u9009\u503c: 1,2,4 EHPC\u96c6\u7fa4\u7528\u6237\u914d\u7f6e \u7528\u6237\u5bc6\u7801 \u957f\u5ea68-30\uff0c\u5fc5\u987b\u5305\u542b\u4e09\u9879\uff08\u5927\u5199\u5b57\u6bcd\u3001\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001()~!@#$%^&*-_+={}[]:;'/<>,.?/\u4e2d\u7684\u7279\u6b8a\u7b26\u53f7\uff09 \u7528\u6237\u540d\u79f0 \u767b\u5f55\u96c6\u7fa4\u6240\u7528\u7684\u7528\u6237\u540d\uff0c\u9ed8\u8ba4\u4e3alammps \u7f51\u7edc\u914d\u7f6e \u53ef\u7528\u533a ECS\u5b9e\u4f8b\u6240\u5728\u53ef\u7528\u533a VPC ID \u8d44\u6e90\u6240\u5728VPC \u4ea4\u6362\u673aID \u8d44\u6e90\u6240\u5728\u4ea4\u6362\u673a","title":"\u53c2\u6570\u8bf4\u660e"},{"location":"#_6","text":"\u8bbf\u95ee\u8ba1\u7b97\u5de2WRF\u793e\u533a\u7248 \u90e8\u7f72\u94fe\u63a5 \u53c2\u6570\u586b\u5199\u5b8c\u6210\u540e\u53ef\u4ee5\u770b\u5230\u5bf9\u5e94\u8be2\u4ef7\u660e\u7ec6\uff0c\u786e\u8ba4\u53c2\u6570\u540e\u70b9\u51fb \u4e0b\u4e00\u6b65\uff1a\u786e\u8ba4\u8ba2\u5355 \u3002 \u786e\u8ba4\u8ba2\u5355\u5b8c\u6210\u540e\u540c\u610f\u670d\u52a1\u534f\u8bae\u5e76\u70b9\u51fb \u7acb\u5373\u521b\u5efa \u8fdb\u5165\u90e8\u7f72\u9636\u6bb5\u3002","title":"\u90e8\u7f72\u6d41\u7a0b"},{"location":"#_7","text":"","title":"\u4f7f\u7528\u6d41\u7a0b"},{"location":"#_8","text":"\u767b\u5f55 \u5f39\u6027\u9ad8\u6027\u80fd\u8ba1\u7b97\u63a7\u5236\u53f0 \u3002 \u5728\u9876\u90e8\u83dc\u5355\u680f\u5de6\u4e0a\u89d2\u5904\uff0c\u9009\u62e9\u5730\u57df\u3002 \u5728\u5de6\u4fa7\u5bfc\u822a\u680f\uff0c\u5355\u51fb \u96c6\u7fa4 \u3002 \u5728 \u96c6\u7fa4 \u9875\u9762\uff0c\u627e\u5230\u5728\u8ba1\u7b97\u5de2\u90e8\u7f72\u597d\u7684\u76ee\u6807\u96c6\u7fa4\uff0c\u5355\u51fb \u8fdc\u7a0b\u8fde\u63a5 \u3002 \u5728 \u8fdc\u7a0b\u8fde\u63a5 \u9875\u9762\uff0c\u8f93\u5165\u96c6\u7fa4\u7528\u6237\u540d\u3001\u767b\u5f55\u5bc6\u7801\u548c\u7aef\u53e3\uff0c\u5355\u51fb ssh\u8fde\u63a5 \u3002","title":"\u6b65\u9aa4\u4e00\uff1a\u901a\u8fc7\u63a7\u5236\u53f0\u8fde\u63a5\u96c6\u7fa4"},{"location":"#_9","text":"\u672c\u6587\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528E-HPC\u96c6\u7fa4\u8fd0\u884cWRF\u8f6f\u4ef6\u8fdb\u884c\u6c14\u8c61\u6a21\u62df\u8ba1\u7b97\u3002 1.\u67e5\u770b\u96c6\u7fa4\u662f\u5426\u5df2\u5b89\u88c5WRF\u76f8\u5173\u8f6f\u4ef6\u3002 export MODULEPATH=/opt/ehpcmodulefiles/ module avail \u9884\u671f\u8fd4\u56de\u5982\u4e0b\uff1a ----------------------------- /opt/ehpcmodulefiles/ ------------------------ mpich/3.2 vnc wrf-mpich/3.8.1 2.\u52a0\u8f7dWRF\u8f6f\u4ef6\u73af\u5883\u3002 module load wrf-mpich/3.8.1 mpich/3.2 echo $WPSHOME $WRFHOME 3.\u5c06\u5b89\u88c5\u7684WPS\u548cWRF\u8f6f\u4ef6\u62f7\u8d1d\u5230\u5de5\u4f5c\u76ee\u5f55\u3002 \u8bf4\u660e:\u8bf7\u5c06\u547d\u4ee4\u4e2d\u7684$WPSCOPYHOME\u548c$WRFCOPYHOME\u66ff\u6362\u4e3a\u5b9e\u9645\u7684\u5de5\u4f5c\u76ee\u5f55\uff0c\u672c\u6587\u4f7f\u7528/home/wrftest\u4f5c\u4e3a\u793a\u4f8b\u3002\u64cd\u4f5c\u540e\uff0c\u8be5\u76ee\u5f55\u4e0b\u5c06\u751f\u6210WPS\u548cWRFV3\u4e24\u4e2a\u76ee\u5f55\u3002\u3002 cp -r $WPSHOME /home/wrftest cp -r $WRFHOME /home/wrftest 4.\u8fdb\u5165WPS\u76ee\u5f55\uff0c\u7136\u540e\u4e0b\u8f7d\u5e76\u89e3\u538b\u5730\u8868\u6570\u636e\u3002 \u8bf4\u660e:\u672c\u793a\u4f8b\u4e2d\u5730\u8868\u6570\u636e\u4f7f\u7528geog_complete.tar.gz\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e0b\u8f7d\u5176\u4ed6\u5730\u8868\u6570\u636e\u3002 cd /home/wrftest/WPS wget https://www2.mmm.ucar.edu/wrf/src/wps_files/geog_complete.tar.gz tar -zxvf geog_complete.tar.gz 5.\u94fe\u63a5\u5230GEOGRID.TBL\u6587\u4ef6\u3002 \u8bf4\u660e:GEOGRID.TBL\u6587\u4ef6\u5b9a\u4e49\u4e86geogrid.exe\u9700\u8981\u63d2\u503c\u5230\u7f51\u683c\u70b9\u4e0a\u7684\u5404\u9759\u6001\u5730\u7406\u6570\u636e\u96c6\u53c2\u6570\u3002 ln -s geogrid/GEOGRID.TBL GEOGRID.TBL 6.\u4fee\u6539namelist.wps\u6587\u4ef6\u3002 namelist\u662fWPS\uff08WRF Preprocessing System\uff0cWRF\u9884\u5904\u7406\u7cfb\u7edf\uff09\u4e2d\u7684\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u6309\u7167\u5404\u4e2a\u7a0b\u5e8f\uff08geogrid.exe\u3001ungrib.exe\u3001metgrid.exe\uff09\u6240\u9700\u8981\u53c2\u6570\u7684\u4e0d\u540c\u5206\u6210\u4e09\u4e2a\u90e8\u5206\uff08&geogrid\u3001&ungrib\u3001&metgrid\uff09\u53ca\u4e00\u4e2a\u5171\u4eab\u90e8\u5206\uff08&share\uff09\uff0c\u5206\u522b\u5b9a\u4e49\u4e86WPS\u6a21\u5757\u6240\u9700\u8981\u7684\u5404\u79cd\u53c2\u6570\u3002\u5982\u4e0b\u793a\u4f8b\u4e3a\u63a8\u8350\u914d\u7f6e\uff0c\u672a\u63d0\u53ca\u7684\u53c2\u6570\u4fdd\u6301\u9ed8\u8ba4\u5373\u53ef\u3002 1.\u672c\u793a\u4f8b\u4e2d\uff0cnamelist.wps\u6587\u4ef6\u5b58\u653e\u5728/home/wrftest/WPS\u76ee\u5f55\u4e0b\u3002 2.\u5728namelist.wps\u6587\u4ef6\u4e2d\uff0c\u8bf7\u4f7f\u7528!\u4f5c\u4e3a\u6ce8\u91ca\u6807\u8bc6\u3002 !\u5171\u4eab\u90e8\u5206 &share !wrf_core\uff1a\u9009\u62e9WRF dynamical core\uff0c\u6709'ARW'\u548c'NMM'\u4e24\u4e2a\u9009\u9879\uff0c\u9ed8\u8ba4\u503c\u4e3a'ARW'\u3002 wrf_core = 'ARW', !start_date\uff1a\u6a21\u62df\u5f00\u59cb\u65f6\u95f4 start_date = '2005-08-28_00:00:00', !end_date\uff1a\u6a21\u62df\u7ed3\u675f\u65f6\u95f4 end_date = '2005-08-29_00:00:00', interval_seconds = 21600, !max_dom\uff1a\u6a21\u62df\u7f51\u683c\u6570\uff08\u7c97\u7f51\u683c+\u5d4c\u5957\u7f51\u683c\uff09\uff0c\u672c\u793a\u4f8b\u4e2d\u5305\u542b\u4e00\u4e2a\u7c97\u7f51\u683c max_dom = 1, !#io_form_geogrid: geogrid\u7a0b\u5e8f\u8f93\u51fa\u683c\u5f0f io_form_geogrid = 2, / !geogrid\u90e8\u5206 !#\u786e\u5b9a\u533a\u57df\u8303\u56f4\u3001\u5d4c\u5957\u5173\u7cfb\u3001\u6a21\u578b\u6295\u5f71 &geogrid parent_id = 1, parent_grid_ratio = 1, i_parent_start = 1, j_parent_start = 1, !\u786e\u5b9a\u7f51\u683c\u5728\u4e1c\u897f\u65b9\u5411\u3001\u5357\u5317\u65b9\u5411\u7684\u5c3a\u5ea6\uff08\u533a\u57df\u7684\u77e2\u91cf\u573a\u7684\u6805\u683c\u6570\uff09\uff0c\u672c\u793a\u4f8b\u4e2d\u4e3a98*70\u4e2a\u7f51\u683c\u70b9 e_we = 98, e_sn = 70, geog_data_res = 'default', !\u5b9a\u4e49\u533a\u57df\u7684\u6805\u683c\u5c3a\u5bf8\uff0c\u672c\u793a\u4f8b\u4e2d\u7f51\u683c\u5206\u8fa8\u7387\u4e3a30km dx = 30000, dy = 30000, !\u5b9a\u4e49\u6295\u5f71\u65b9\u5f0f\uff0c\u5173\u4e8e\u6295\u5f71\u65b9\u5f0f\u8bf4\u660e\u53ef\u4ee5\u53c2\u8003WRF\u5b98\u7f51 map_proj = 'mercator' !\u5b9a\u4e49\u533a\u57df\u7684\u4e2d\u5fc3\u7ecf\u7eac\u5ea6\u5750\u6807 ref_lat = 25.00, ref_lon = -89.00, !\u6295\u5f71\u7684\u4e09\u4e2a\u53c2\u6570\u503c\uff0c\u968f\u6295\u5f71\u65b9\u5f0f\u4e0d\u540c\u8bbe\u5b9a\u4e0d\u540c truelat1 = 0.0, truelat2 = 0.0, stand_lon = -89.0, !geog_data_path = '\u5730\u8868\u6570\u636e\u5b58\u50a8\u8def\u5f84' geog_data_path = '/home/wrftest/WPS/geog' / !ungrib\u90e8\u5206 &ungrib !out_format\uff1aungrib\u751f\u6210\u7684\u53ef\u4f9bmetgrid\u8bfb\u53d6\u7684\u6587\u4ef6\u683c\u5f0f\uff0c\u6709'WPS'\u3001'SI'\u3001'MM5'\u4e09\u79cd\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3a'WPS' out_format = 'WPS', !prefix\uff1aungrib\u751f\u6210\u7684\u4e2d\u95f4\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u524d\u7f00\u540d prefix = 'FILE' / !metgrid\u90e8\u5206 &metgrid !fg_name\uff1aungrib\u7a0b\u5e8f\u751f\u6210\u7684\u6587\u4ef6 fg_name = 'FILE', !io_form_metgrid\uff1ametgrid\u751f\u6210\u7684\u6587\u4ef6\u683c\u5f0f !\u652f\u6301\u4e09\u79cd\u683c\u5f0f1\uff08binary\uff0c\u540e\u7f00\u540d.int\uff09\u30012\uff08net CDF\uff0c\u540e\u7f00\u540d.nc\uff09\u30013\uff08Grib1\uff0c\u540e\u7f00\u540d.gr1\uff09 !\u9ed8\u8ba4\u503c\uff1a2 io_form_metgrid = 2 / 7.\u5c06\u9759\u6001\u5730\u5f62\u6570\u636e\u63d2\u503c\u5230\u7f51\u683c\u70b9\u3002 ./geogrid.exe \u8fd0\u884cgeogrid.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210geo_em.d0N.nc\u5730\u5f62\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a","title":"\u6b65\u9aa4\u4e8c\uff1a\u63d0\u4ea4\u4f5c\u4e1a"},{"location":"#ungribexe","text":"ungrib.exe\u7528\u4e8e\u4eceGRIB\u683c\u5f0f\u7684\u6c14\u8c61\u6570\u636e\u4e2d\u63d0\u53d6\u6240\u9700\u8981\u7684\u6c14\u8c61\u8981\u7d20\u573a\u3002 1.\u4e0b\u8f7d\u5e76\u89e3\u538bKatrina\u6c14\u8c61\u6570\u636e\u3002 \u8bf4\u660e: \u672c\u793a\u4f8b\u4e2d\u6c14\u8c61\u6570\u636e\u4e3aKatrina.tar.gz\uff0c\u8bf7\u4e0b\u8f7dKatrina.tar.gz\u3002\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4e0b\u8f7d\u5176\u4ed6\u6c14\u8c61\u6570\u636e\u3002 cd /home/wrftest/WPS wget http://www2.mmm.ucar.edu/wrf/TUTORIAL_DATA/Katrina.tar.gz tar -zxvf Katrina.tar.gz 2.\u901a\u8fc7link_grib.csh\u811a\u672c\u94fe\u63a5\u6c14\u8c61\u6570\u636e\u3002 ./link_grib.csh /home/wrftest/WPS/Katrina/avn* 3.\u9009\u62e9\u6c14\u8c61\u6570\u636e\u76f8\u5e94\u7684Vtable\u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684Vtable\u4e3aVtable.GFS\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u5176\u4ed6\u7684Vtable\u3002 ln -sf ungrib/Variable_Tables/Vtable.GFS Vtable 4.\u63d0\u53d6\u6240\u9700\u8981\u7684\u6c14\u8c61\u8981\u7d20\u573a\u3002 ./ungrib.exe \u8fd0\u884cungrib.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210FILE:YYYY-MM-DD_hh*\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a","title":"\u6b65\u9aa4\u4e09\uff1a\u8fd0\u884cungrib.exe"},{"location":"#metgridexe","text":"metgrid.exe\u7528\u4e8e\u5c06ungrib.exe\u63d0\u53d6\u51fa\u7684\u6c14\u8c61\u573a\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7531geogrid.exe\u786e\u5b9a\u7684\u7f51\u683c\u70b9\u4e0a\u3002 1.\u94fe\u63a5\u5230GEOGRID.TBL\u6587\u4ef6\u3002 GEOGRID.TBL\u6587\u4ef6\u5b9a\u4e49\u4e86metgrid.exe\u5982\u4f55\u5c06\u6c14\u8c61\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7f51\u683c\u70b9\u4e0a\u3002 cd /home/wrftest/WPS ln -s metgrid/METGRID.TBL.ARW METGRID.TBL 2.\u5c06\u6c14\u8c61\u573a\u6570\u636e\u6c34\u5e73\u63d2\u503c\u5230\u7531geogrid\u786e\u5b9a\u7684\u7f51\u683c\u70b9\u4e0a\u3002 ./metgrid.exe \u8fd0\u884cmetgrid.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftes/WPS\u76ee\u5f55\u4e0b\u751f\u6210met_em.d0N.yyyy-mm-dd_hh:mm:ss.nc\u6587\u4ef6\uff0c\u9884\u671f\u8fd4\u56de\u7ed3\u679c\u5982\u4e0b\uff1a","title":"\u6b65\u9aa4\u56db\uff1a\u8fd0\u884cmetgrid.exe"},{"location":"#wrfexe","text":"wrf.exe\u7528\u4e8e\u8f93\u51fa\u5929\u6c14\u9884\u6d4b\u6570\u636e\u3002 1.\u8fde\u63a5WPS\u7684\u5904\u7406\u7ed3\u679c\u3002 cd /home/wrftest/WRFV3 ln -s /home/wrftest/WPS/met_em.d01.2005-08-2*. \u6ce8\u610f: \u6b64\u5904\u8981\u662f\u8fde\u63a5\u4e0d\u6210\u529f\uff0c\u4f1a\u5bfc\u81f4\u540e\u9762\u7684wrfinput_d01\u3001wrfbdy_d01\u6587\u4ef6\u521b\u5efa\u4e0d\u51fa\u6765\uff0c\u60a8\u53ef\u4ee5\u5c06/home/wrftest/WPS\u6587\u4ef6\u5939\u4e0bmet_em.d01.2005-08-2\u5f00\u5934\u7684\u6587\u4ef6\u62f7\u8d1d\u5230/home/wrftest/WRFV3\u6587\u4ef6\u5939\u4e0b\u3002 2.\u4fee\u6539namelist.input\u6587\u4ef6\u3002 cd /home/wrftest/WRFV3/run vim namelist.input namelist.input\u6587\u4ef6\u4e2d&time_control\u3001&domains\u90e8\u5206\u7684\u76f8\u5173\u53c2\u6570\u9700\u8981\u4e0enamelist.wps\u6587\u4ef6\u4e2d\u7684\u53c2\u6570\u4fdd\u6301\u4e00\u81f4\u3002\u672c\u6587\u4f7f\u7528\u7684\u914d\u7f6e\u793a\u4f8b\u5982\u4e0b: &time_control run_days = 0, run_hours = 12, run_minutes = 0, run_seconds = 0, start_year = 2005, 2005, 2005, start_month = 08, 08, 08, start_day = 28, 28, 28, start_hour = 00, 00, 00, start_minute = 00, 00, 00, start_second = 00, 00, 00, end_year = 2005, 2005, 2005, end_month = 08, 08, 08, end_day = 29, 29, 29, end_hour = 00, 00, 00, end_minute = 00, 00, 00, end_second = 00, 00, 00, interval_seconds = 21600 input_from_file = .true.,.true.,.true., history_interval = 180, 60, 60, frames_per_outfile = 1000, 1000, 1000, restart = .false., restart_interval = 5000, io_form_history = 2 io_form_restart = 2 io_form_input = 2 io_form_boundary = 2 debug_level = 0 iofields_filename = \"extraoutput_d01.txt\" / &domains time_step = 180, time_step_fract_num = 0, time_step_fract_den = 1, max_dom = 1, e_we = 98, 112, 94, e_sn = 70, 97, 91, e_vert = 30, 30, 30, p_top_requested = 5000, num_metgrid_levels = 27, num_metgrid_soil_levels = 4, dx = 30000, 10000, 3333.33, dy = 30000, 10000, 3333.33, grid_id = 1, 2, 3, parent_id = 0, 1, 2, i_parent_start = 1, 31, 30, j_parent_start = 1, 17, 30, parent_grid_ratio = 1, 3, 3, parent_time_step_ratio = 1, 3, 3, feedback = 1, smooth_option = 0, / &physics mp_physics = 6, 6, 6, ra_lw_physics = 4, 4, 4, ra_sw_physics = 4, 4, 4, radt = 10, 10, 10, sf_sfclay_physics = 1, 1, 1, sf_surface_physics = 2, 2, 2, bl_pbl_physics = 1, 1, 1, bldt = 0, 0, 0, cu_physics = 0, 0, 0, cudt = 0, 0, 0, isfflx = 1, ifsnow = 0, icloud = 1, surface_input_source = 1, num_soil_layers = 4, sf_urban_physics = 0, 0, 0, / &fdda / &dynamics w_damping = 0, diff_opt = 1, 1, 1, km_opt = 4, 4, 4, diff_6th_opt = 0, 0, 0, diff_6th_factor = 0.12, 0.12, 0.12, base_temp = 290. damp_opt = 0, zdamp = 5000., 5000., 5000., dampcoef = 0.2, 0.2, 0.2 khdif = 0, 0, 0, kvdif = 0, 0, 0, non_hydrostatic = .true., .true., .true., moist_adv_opt = 1, 1, 1, scalar_adv_opt = 1, 1, 1, / &bdy_control spec_bdy_width = 5, spec_zone = 1, relax_zone = 4, specified = .true., .false.,.false., nested = .false., .true., .true., / &grib2 / &namelist_quilt nio_tasks_per_group = 0, nio_groups = 1, / 3.\u521d\u59cb\u5316\u6a21\u62df\u6570\u636e\u3002 ./real.exe \u8fd0\u884creal.exe\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftest/WRFV3/run\u76ee\u5f55\u4e0b\u751f\u6210wrfinput_d01\u3001wrfbdy_d01\u6587\u4ef6\u3002 4.\u8f93\u51fa\u5929\u6c14\u9884\u6d4b\u6570\u636e\u3002 \u7f16\u5199\u4f5c\u4e1a\u811a\u672c vim wrf.slurm wrf.slurm\u7684\u5185\u5bb9\u793a\u4f8b\u5982\u4e0b\uff1a #!/bin/bash #SBATCH -N 1 #SBATCH -n 2 #SBATCH --cpus-per-task=1 #SBATCH -J wrf-test #SBATCH -o wrf_test.log module load wrf-mpich/3.8.1 mpich/3.2 mpirun -np 2 -ppn 1 -bind-to core:1 /home/wrftest/WRFV3/run/wrf.exe \u63d0\u4ea4\u4f5c\u4e1a batch < wrf.slurm \u6ce8\u610f\uff1a\u8981\u662f\u6267\u884c\u4e0d\u6210\u529f\u8bf7\u67e5\u770bwrf_test.log\u6587\u4ef6\uff0c\u5982\u53d1\u751f\u4ee5\u4e0b\u9519\u8bef\uff0c\u8bf7\u6267\u884c\uff1a export LD_LIBRARY_PATH=/opt/WRF_WPS-mpich-3.8.1/util/lib:$LD_LIBRARY_PATH \u4f5c\u4e1a\u8fd0\u884c\u6210\u529f\u540e\uff0c\u4f1a\u5728/home/wrftest/WRFV3/run\u76ee\u5f55\u4e0b\u751f\u6210wrfout_d01_[date]\u6587\u4ef6\uff0c\u4f8b\u5982\uff1awrfout_d01_2005-08-28_00:00:00\u3002","title":"\u6b65\u9aa4\u4e94\uff1a\u8fd0\u884cwrf.exe"},{"location":"#ncl","text":"\u4ee5\u4e0b\u662f\u5728 CentOS 7.6 \u4e0a\u5b89\u88c5 Miniconda \u548c NCL \u7684\u6b65\u9aa4\uff1a 1.\u521b\u5efancl\u6587\u4ef6\u5939 cd /home/wrftest/WRFV3/run mkdir ncl 2.\u4e0b\u8f7d Miniconda \u5b89\u88c5\u811a\u672c\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u547d\u4ee4\u4ece Miniconda \u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7d\u6700\u65b0\u7248\u672c\uff1a wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh 3.\u8fd0\u884c\u5b89\u88c5\u811a\u672c\u4ee5\u5b89\u88c5 Miniconda\u3002\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u8fd0\u884c\u811a\u672c\uff1a bash Miniconda3-latest-Linux-x86_64.sh 4.\u5237\u65b0\u73af\u5883\u53d8\u91cf\uff0c\u6b64\u65f6\u524d\u9762\u4f1a\u51fa\u73b0\uff08base\uff09\u3002 source ~/.bashrc 5.\u67e5\u770b\u5b89\u88c5conda\u7684\u7248\u672c\u3002 conda -V 6.\u66f4\u65b0conda\u3002\u9047\u5230yes/no\u7684\u65f6\u5019\u90fd\u662fyes\u3002 conda update -n root --all 7.\u5b89\u88c5ncl\u3002 conda create -n ncl_stable -c conda-forge ncl 8.\u8fdb\u5165ncl\u4ea4\u4e92\u6a21\u5f0f conda activate ncl_stable ncl \u8bf4\u660e\uff1a\u5f53\u8f93\u5165\u5b8cncl\u547d\u4ee4\uff0c\u5c4f\u5e55\u51fa\u73b0: ncl 0> ,\u5c31\u7b97\u662f\u5b89\u88c5\u6210\u529f\u3002 9.\u9000\u51fa\u4ea4\u4e92\u6a21\u5f0f exit","title":"\u6b65\u9aa4\u516d\uff1a\u5b89\u88c5NCL"},{"location":"#wrf","text":"1.\u521b\u5efancl\u6587\u4ef6 \u5c06\u6b65\u9aa4\u4e94\u7684\u8fd0\u884c\u7ed3\u679c\u8f6c\u5316\u4e3a.ncl\u6587\u4ef6 cd /home/wrftest/WRFV3/run vim wrf_test.ncl \u5c06\u4e0b\u9762\u5185\u5bb9\u5199\u5165wrf_test.ncl\u6587\u4ef6\u4e2d load \"$NCARG_ROOT/lib/ncarg/nclscripts/csm/gsn_code.ncl\" load \"$NCARG_ROOT/lib/ncarg/nclscripts/wrf/WRFUserARW.ncl\" begin a = addfile(\"/home/wrftest/WRFV3/run/wrfout_d01_2005-08-28_00:00:00\",\"r\") ter = wrf_user_getvar(a,\"HGT\",0) ; Get terrain height for time 0 wks = gsn_open_wks(\"png\",\"test\") ; Create a plot workstation opts = True ; Set some Basic Plot options opts@MainTitle = \"GEOGRID FIELDS\" res = opts ; Use basic options for this field res@cnFillOn = True ; Create a color fill plot contour = wrf_contour(a,wks,ter,res) ; \u5355\u72eccontour\u6ca1\u6709\u753b\u9762 pltres = True ; Set plot options mpres = True ; Set map options mpres@mpGeophysicalLineColor = \"Black\" ; Overwrite basic map settings mpres@mpGridLineColor = \"Black\" mpres@mpLimbLineColor = \"Black\" mpres@mpNationalLineColor = \"Black\" mpres@mpPerimLineColor = \"Black\" mpres@mpUSStateLineColor = \"Black\" plot = wrf_map_overlays(a,wks,(/contour/),pltres,mpres) ; Plot the data over a map background end 2.\u4f7f\u7528ncl\u8fd0\u884cwrf_test.ncl\u6587\u4ef6\u3002 conda activate ncl_stable ncl wrf_test.ncl \u8bf4\u660e\uff1a\u6267\u884c\u6210\u529f\u540e\u4f1a\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u751f\u6210test.png\u6587\u4ef6","title":"\u6b65\u9aa4\u4e03\uff1aWRF\u7ed3\u679c\u56fe\u50cf\u5316"},{"location":"#_10","text":"\u672c\u6587\u4f7f\u7528\u7ed9\u8ba1\u7b97\u8282\u70b9\u6302\u8f7dEIP\u7684\u65b9\u5f0f\uff0c\u5c06png\u56fe\u7247\u6587\u4ef6\u4e0b\u8f7d\u5230\u672c\u5730\u67e5\u770b 1.\u5728EHPC\u63a7\u5236\u53f0\u627e\u5230\u8ba1\u7b97\u8282\u70b9\u5b9e\u4f8b 2.\u521b\u5efa\u5f39\u6027\u516c\u7f51IP\u5e76\u4e0e\u8ba1\u7b97\u5b9e\u4f8b\u7ed1\u5b9a 3.\u5c06\u56fe\u7247\u4f20\u8f93\u5230\u672c\u5730\u5e76\u67e5\u770b scp root@\u516c\u7f51IP:/home/wrftest/WRFV3/run/test.png ./","title":"\u6b65\u9aa4\u516b\uff1a\u67e5\u770b\u56fe\u50cf\u5316\u7ed3\u679c"}]}